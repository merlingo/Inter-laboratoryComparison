@model List<Calcom.Domain.Entities.Testler>
@{
    ViewBag.Title = "TestTakip";
    Layout = "~/Views/Shared/_admin_layout.cshtml";
}

<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    

      <!-- Content Wrapper. Contains page content -->
        <section class="content-header">
          <h1>
         Karşılaştırma Takibi
          </h1>
          <ol class="breadcrumb">
            <li><i class="fa fa-dashboard"></i> <a href="Baslangic">Süreç-Başlangıç</a></li>
            <li  class="active"> Karşılaştırma Takibi</li>
  
          </ol>
        </section>

      

        <!-- Main content -->
        <section class="content">
        
          <!-- Default box -->
          <div class="box box-danger">
            <div class="box-header with-border">
                        <h3 class="box-title">Karşılaştırma Listesi</h3>
              <div class="box-tools pull-right">
          </div>
            </div>
           <div class="box-body table-responsive no-padding">
                  <table class="table table-hover">
                    <tbody><tr>
                      <th>Ölçüm Aleti</th>
                      <th>Başlangıç Zamanı</th>
                      <th>Bitiş Zamanı</th>
                      <th>Ölçüm Aralığı</th>
                        <th>Fiyat</th>
                      <th>Gereken Lab</th>
                        <th>Kayıtlı Laboratuvar</th> 
                    </tr>
                   @foreach(var oa in Model){
                    <tr id="@oa.Id">
                          <td>@oa.Karsilastirmalar.OlcumAletleri.Isim</td>
                          <td>@oa.BaslangicZamani</td>
                          <td>@oa.BitisZamani</td>
                          <td>@oa.Karsilastirmalar.OlcumAraligiBas - @oa.Karsilastirmalar.OlcumAraligiSon</td>
                          <td>@oa.Fiyat</td>
                          <td>@oa.GerekenLabSayisi</td>
                          <td>@oa.Olcumler.Count</td>

                    </tr>
                   }
                  </tbody></table>

            </div><!-- /.box-body -->
           
          </div><!-- /.box -->
            <div class="row" id="partialSpan">
                <div class="col-sm-6">
                  <div class="box box-danger ">
                      <div class="box-header with-border">
                        <h3 class="box-title">Karşılaştırma Bilgileri</h3>
                        <div class="box-tools pull-right">
                       </div>
                     </div>
                    <div class="box-body">
                      <p> Yeni başlatılan karşılaştırma bilgileri </p>
                     </div><!-- /.box-body -->
                  </div>
                </div>

               <div class="col-sm-6">
                  <div class="box box-danger ">
                      <div class="box-header with-border">
                        <h3 class="box-title">Ölçüm Aleti Bilgileri</h3>
                        <div class="box-tools pull-right">
                       </div>
                     </div>
                    <div class="box-body">
                      <p> istatistiksel ölçüm aleti bilgileri </p>
                     </div><!-- /.box-body -->
                  </div>
                </div>
            </div>
        </section><!-- /.content -->


    </div>

        
      <aside class="control-sidebar control-sidebar-dark">
        <!-- Create the tabs -->
      @*  <ul class="nav nav-tabs nav-justified control-sidebar-tabs">
          <li class="active"><a href="#control-sidebar-home-tab" data-toggle="tab"><i class="fa fa-eye"></i></a></li>
          <li><a href="#control-sidebar-settings-tab" data-toggle="tab"><i class="fa  fa-exchange"></i></a></li>
        </ul>
        <!-- Tab panes -->*@
        <div class="tab-content">
          <!-- Home tab content -->
          <div class="tab-pane active" id="control-sidebar-home-tab">
            <h3 class="control-sidebar-heading">İzlence</h3>
            <ul class="control-sidebar-menu">
             
              <li>
                <a href="TestTakip">
                  <i class="menu-icon fa fa-line-chart bg-yellow"></i>
                  <div class="menu-info">
                    <h4 class="control-sidebar-subheading">Test Takip</h4>
                    <p>Başlatılan karşılaştırmaların takibi</p>
                  </div>
                </a>
              </li>
              <li>
              <li>
                <a href="Takvimlendirme">
                  <i class="menu-icon fa fa-flask bg-light-blue"></i>
                  <div class="menu-info">
                    <h4 class="control-sidebar-subheading">Takvimlendirme</h4>
                    <p>Labların kalibrasyon tarihlerini belirleme</p>
                  </div>
                </a>
              </li>
              <li>
                <a href="LabTestAnalizi">
                  <i class="menu-icon fa fa-balance-scale bg-red"></i>
                  <div class="menu-info">
                    <h4 class="control-sidebar-subheading">Lab - Test Analizi</h4>
                    <p>Karşılaştırmaya kayıt olan Laboratuvarlar</p>
                  </div>
                </a>
              </li>
                </ul>
               <h3 class="control-sidebar-heading">İşlemler</h3>
               <ul class="control-sidebar-menu">
                   
                 <li>
                <a href="KarsilastirmaBaslat">
                  <i class="menu-icon fa fa-balance-scale bg-red"></i>
                  <div class="menu-info">
                    <h4 class="control-sidebar-subheading">Karşılaştırma Başlat</h4>
                    <p>Yeni karşılaştırma başlatma ve yayınlama</p>
                  </div>
                </a>
                </li>
                 <li>
                <a  data-toggle="modal" data-target="#labtestsecim" onclick="IslemPartial('ProtokolEkle')">
                  <i class="menu-icon fa fa-flask bg-light-blue"></i>
                  <div class="menu-info">
                    <h4 class="control-sidebar-subheading">Protokol Ekle</h4>
                    <p>Labların kalibrasyon tarihlerini belirleme</p>
                  </div>
                </a>
              </li>
                 <li>
                <a data-toggle="modal" data-target="#labtestsecim" href="#" onclick="IslemPartial('DavetAyarlari')">
                  <i class="menu-icon fa fa-line-chart bg-yellow"></i>
                  <div class="menu-info">
                    <h4 class="control-sidebar-subheading">Karşılaştırma Daveti</h4>
                    <p>Başlatılan karşılaştırmalar için lablara  atılan mail için mail ayarları</p>
                  </div>
                </a>
              </li>
            </ul><!-- /.control-sidebar-menu -->


          </div>
        </div>
      </aside><!-- /.control-sidebar -->
      <div class="control-sidebar-bg"></div>
<div id="labtestsecim" class="modal fade" role="dialog">

  <div class="modal-dialog" >   
    <div class="modal-content" >
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h3>Lab ve Test Seçimi</h3>
       </div>
         <div class="modal-body">
   <!-- Modal content-->
                 <div class="overlay">
                  <i class="fa fa-refresh fa-spin"></i>
                </div> 
         </div>
         <div class="modal-footer">
                    <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
                   <button type="submit" class="btn btn-success">Kaydet</button>
                  </div>
     </div>
  </div>
</div>
<script>
    var sekme = document.getElementById("baslangic_sekme");
    sekme.classList.add("active");

      @foreach(var t in Model){
        
        @:$("#@t.Id").click(function () { $(".active").removeAttr('class'); $("#uretim_sekme").attr('class', 'active'); $(this).attr('class', 'active'); testGetir(@t.Id); });
   }
    function testGetir(karid) {
        $.ajax(
        {
            url: '/AdminPanel/TestTakipBilgileri',
            type: "GET",
            data: { 'id': karid },
            success: function (response) {
                $("#partialSpan").html(response);

            }

        });

    }
    function IslemPartial(is) {
        $.ajax(
       {
           url: '/AdminPanel/' + is,
           type: "GET",
           //data: { 'id': id, 'k': k },
           success: function (response) {
               $("#labtestsecim").html(response);
           }
       });
    }

</script>